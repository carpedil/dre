import{s as pe,f as d,l as j,a as R,g as _,h as k,u as se,m as q,c as F,d as f,j as p,i as H,v as i,B as re,C as Y,z as W,D as X,E as ve,o as ge,n as G}from"../chunks/scheduler.aa2ef5b9.js";import{e as M}from"../chunks/each.e59479a4.js";import{S as me,i as be}from"../chunks/index.11beda0a.js";import{e as we,f as oe,s as Ee}from"../chunks/apimessage.aa0364f9.js";import{E as ke}from"../chunks/ExportToExcel.ebc8f526.js";function ae(n,e,s){const r=n.slice();return r[9]=e[s],r}function ne(n,e,s){const r=n.slice();return r[12]=e[s],r[14]=s,r}function ce(n,e,s){const r=n.slice();return r[15]=e[s],r}function ie(n,e,s){const r=n.slice();return r[18]=e[s],r}function he(n){let e,s,r;return{c(){e=d("input"),this.h()},l(t){e=_(t,"INPUT",{type:!0,class:!0}),this.h()},h(){p(e,"type","button"),e.value="download",p(e,"class","border rounded-md float-right mr-1 pl-1 pr-1 text-blue-600")},m(t,o){H(t,e,o),s||(r=Y(e,"click",n[5]),s=!0)},p:W,d(t){t&&f(e),s=!1,r()}}}function fe(n){let e,s,r,t=n[18].created_at+"",o,h,c,T=n[18].description+"",y,I,V,u;function D(){return n[7](n[18])}return{c(){e=d("table"),s=d("tr"),r=d("td"),o=j(t),h=R(),c=d("td"),y=j(T),I=R(),this.h()},l(x){e=_(x,"TABLE",{class:!0});var w=k(e);s=_(w,"TR",{});var B=k(s);r=_(B,"TD",{class:!0});var L=k(r);o=q(L,t),L.forEach(f),h=F(B),c=_(B,"TD",{class:!0});var S=k(c);y=q(S,T),S.forEach(f),B.forEach(f),I=F(w),w.forEach(f),this.h()},h(){p(r,"class","w-[10vw] text-gray-400"),p(c,"class","w-[10vw] text-gray-500"),p(e,"class","flex flex-row items-center border-b-blue-600 border hover:bg-blue-300")},m(x,w){H(x,e,w),i(e,s),i(s,r),i(r,o),i(s,h),i(s,c),i(c,y),i(e,I),V||(u=Y(s,"click",D),V=!0)},p(x,w){n=x,w&4&&t!==(t=n[18].created_at+"")&&G(o,t),w&4&&T!==(T=n[18].description+"")&&G(y,T)},d(x){x&&f(e),V=!1,u()}}}function ue(n){let e,s=n[15]+"",r;return{c(){e=d("th"),r=j(s),this.h()},l(t){e=_(t,"TH",{class:!0});var o=k(e);r=q(o,s),o.forEach(f),this.h()},h(){p(e,"class","text-left border flex-1")},m(t,o){H(t,e,o),i(e,r)},p(t,o){o&2&&s!==(s=t[15]+"")&&G(r,s)},d(t){t&&f(e)}}}function de(n){let e,s=n[9][n[14]]+"",r;return{c(){e=d("td"),r=j(s),this.h()},l(t){e=_(t,"TD",{class:!0});var o=k(e);r=q(o,s),o.forEach(f),this.h()},h(){p(e,"class","flex-1")},m(t,o){H(t,e,o),i(e,r)},p(t,o){o&2&&s!==(s=t[9][t[14]]+"")&&G(r,s)},d(t){t&&f(e)}}}function _e(n){let e,s,r=M(n[1].headers),t=[];for(let o=0;o<r.length;o+=1)t[o]=de(ne(n,r,o));return{c(){e=d("tr");for(let o=0;o<t.length;o+=1)t[o].c();s=R(),this.h()},l(o){e=_(o,"TR",{class:!0});var h=k(e);for(let c=0;c<t.length;c+=1)t[c].l(h);s=F(h),h.forEach(f),this.h()},h(){p(e,"class","w-full border")},m(o,h){H(o,e,h);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);i(e,s)},p(o,h){if(h&2){r=M(o[1].headers);let c;for(c=0;c<r.length;c+=1){const T=ne(o,r,c);t[c]?t[c].p(T,h):(t[c]=de(T),t[c].c(),t[c].m(e,s))}for(;c<t.length;c+=1)t[c].d(1);t.length=r.length}},d(o){o&&f(e),X(t,o)}}}function Te(n){let e,s,r,t="F2",o,h,c="Esc",T,y,I,V,u,D,x,w,B,L,S,O,J,P,K,Z,E=n[1].rows.length!=0&&he(n),z=M(n[2]),v=[];for(let a=0;a<z.length;a+=1)v[a]=fe(ie(n,z,a));let N=M(n[1].headers),g=[];for(let a=0;a<N.length;a+=1)g[a]=ue(ce(n,N,a));let U=M(n[1].rows),m=[];for(let a=0;a<U.length;a+=1)m[a]=_e(ae(n,U,a));return{c(){e=d("div"),s=d("div"),r=d("code"),r.textContent=t,o=j(": run "),h=d("code"),h.textContent=c,T=j(`: clear
		`),y=d("input"),I=R(),E&&E.c(),V=R(),u=d("div"),D=d("textarea"),x=R(),w=d("div");for(let a=0;a<v.length;a+=1)v[a].c();B=R(),L=d("div"),S=d("table"),O=d("tr");for(let a=0;a<g.length;a+=1)g[a].c();J=R(),P=d("tbody");for(let a=0;a<m.length;a+=1)m[a].c();this.h()},l(a){e=_(a,"DIV",{class:!0});var b=k(e);s=_(b,"DIV",{class:!0});var l=k(s);r=_(l,"CODE",{"data-svelte-h":!0}),se(r)!=="svelte-edwhxk"&&(r.textContent=t),o=q(l,": run "),h=_(l,"CODE",{"data-svelte-h":!0}),se(h)!=="svelte-13p8t51"&&(h.textContent=c),T=q(l,`: clear
		`),y=_(l,"INPUT",{type:!0,class:!0}),I=F(l),E&&E.l(l),l.forEach(f),V=F(b),u=_(b,"DIV",{class:!0});var C=k(u);D=_(C,"TEXTAREA",{class:!0}),k(D).forEach(f),x=F(C),w=_(C,"DIV",{class:!0});var $=k(w);for(let A=0;A<v.length;A+=1)v[A].l($);$.forEach(f),C.forEach(f),B=F(b),L=_(b,"DIV",{class:!0});var ee=k(L);S=_(ee,"TABLE",{class:!0});var Q=k(S);O=_(Q,"TR",{class:!0});var te=k(O);for(let A=0;A<g.length;A+=1)g[A].l(te);te.forEach(f),J=F(Q),P=_(Q,"TBODY",{});var le=k(P);for(let A=0;A<m.length;A+=1)m[A].l(le);le.forEach(f),Q.forEach(f),ee.forEach(f),b.forEach(f),this.h()},h(){p(y,"type","button"),y.value="save",p(y,"class","border rounded-md pl-1 pr-1"),p(s,"class","h-[3vh] items-center p-0.5 bg-gray-300"),p(D,"class","w-[80vw] h-[34.6vh] p-0.5 border resize-none bg-slate-50"),p(w,"class","border bg-slate-200 w-[20vw] overflow-y-scroll"),p(u,"class","w-auto max-h-[45vh] h-[35vh] border border-b-blue-600 flex flex-row items-stretch"),p(O,"class","w-full"),p(S,"class","border w-full p-0.5"),p(L,"class","w-auto h-[62vh] border overflow-y-scroll"),p(e,"class","w-[99.6vw] h-[100vh] m-0 border bg-white")},m(a,b){H(a,e,b),i(e,s),i(s,r),i(s,o),i(s,h),i(s,T),i(s,y),i(s,I),E&&E.m(s,null),i(e,V),i(e,u),i(u,D),re(D,n[0]),i(u,x),i(u,w);for(let l=0;l<v.length;l+=1)v[l]&&v[l].m(w,null);i(e,B),i(e,L),i(L,S),i(S,O);for(let l=0;l<g.length;l+=1)g[l]&&g[l].m(O,null);i(S,J),i(S,P);for(let l=0;l<m.length;l+=1)m[l]&&m[l].m(P,null);K||(Z=[Y(y,"click",n[3]),Y(D,"input",n[6])],K=!0)},p(a,[b]){if(a[1].rows.length!=0?E?E.p(a,b):(E=he(a),E.c(),E.m(s,null)):E&&(E.d(1),E=null),b&1&&re(D,a[0]),b&20){z=M(a[2]);let l;for(l=0;l<z.length;l+=1){const C=ie(a,z,l);v[l]?v[l].p(C,b):(v[l]=fe(C),v[l].c(),v[l].m(w,null))}for(;l<v.length;l+=1)v[l].d(1);v.length=z.length}if(b&2){N=M(a[1].headers);let l;for(l=0;l<N.length;l+=1){const C=ce(a,N,l);g[l]?g[l].p(C,b):(g[l]=ue(C),g[l].c(),g[l].m(O,null))}for(;l<g.length;l+=1)g[l].d(1);g.length=N.length}if(b&2){U=M(a[1].rows);let l;for(l=0;l<U.length;l+=1){const C=ae(a,U,l);m[l]?m[l].p(C,b):(m[l]=_e(C),m[l].c(),m[l].m(P,null))}for(;l<m.length;l+=1)m[l].d(1);m.length=U.length}},i:W,o:W,d(a){a&&f(e),E&&E.d(),X(v,a),X(g,a),X(m,a),K=!1,ve(Z)}}}function ye(n,e,s){let r=0,t="",o={headers:[],rows:[]},h=[];ge(async()=>{console.log(window),window.addEventListener("keydown",function(u){u.key==="F2"&&(clearTimeout(r),r=setTimeout(async()=>{if(console.log(t.includes("SELECT")),t.length!=0){if(t.toLowerCase().includes("select")!==!0)return;console.log(`F2 pressed!
`,t),s(1,o=await we(t)),console.log(`output:
`,o)}},200)),u.key==="Escape"&&(clearTimeout(r),r=setTimeout(()=>{s(0,t=""),s(1,o={headers:[],rows:[]}),console.log("ESC pressed!",t)},200))}),s(2,h=await oe())});const c=async()=>{if(t.length==0){alert("script is empty!");return}let u=prompt("give a description for this script"),D={description:u||`${t}`,content:t};await Ee(D),s(2,h=await oe())},T=u=>{s(0,t=u)},y=()=>{ke(o.rows,"data")};function I(){t=this.value,s(0,t)}return[t,o,h,c,T,y,I,u=>T(u.content)]}class Ie extends me{constructor(e){super(),be(this,e,ye,Te,pe,{})}}export{Ie as component};
